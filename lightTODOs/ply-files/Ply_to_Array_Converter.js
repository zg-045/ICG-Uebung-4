function formatString(input) {
    // Zeilen aufteilen
    const lines = input.trim().split('\n');
  
    // Verarbeite jede Zeile
    const formattedLines = lines.map(line => {
      const numbers = line.trim().split(' '); // Zahlen in der Zeile aufteilen
  
      // Prüfe, ob es eine Zeile mit 4 Zahlen ist und entferne die führende '3'
      if (numbers.length === 4 && numbers[0] === '3') {
        numbers.shift(); // Entfernt die erste Zahl (die '3')
      }
  
      // Füge die Zahlen mit Komma zusammen
      return numbers.join(',');
    });
  
    // Verbinde die Zeilen mit einem Komma und einem Zeilenumbruch
    return formattedLines.join(',\n');
  }

  const input = `
477 16 5 
 475 8 9 
 5 17 478 
 1 9 10 
 478 18 479 
 476 10 11 
 479 19 480 
 2 11 12 
 480 20 481 
 2 13 3 
 473 81 6 
 307 481 20 
 3 14 4 
 474 6 7 
 4 15 477 
 0 7 8 
 6 22 7 
 14 30 15 
 7 23 8 
 15 31 16 
 8 24 9 
 16 32 17 
 9 25 10 
 18 32 33 
 10 26 11 
 19 33 34 
 12 26 27 
 19 35 20 
 12 28 13 
 6 81 21 
 307 20 35 
 13 29 14 
 25 41 26 
 33 49 34 
 26 42 27 
 34 50 35 
 27 43 28 
 21 81 36 
 307 35 50 
 29 43 44 
 21 37 22 
 29 45 30 
 22 38 23 
 31 45 46 
 23 39 24 
 32 46 47 
 24 40 25 
 33 47 48 
 44 60 45 
 37 53 38 
 46 60 61 
 38 54 39 
 46 62 47 
 39 55 40 
 47 63 48 
 40 56 41 
 48 64 49 
 42 56 57 
 49 65 50 
 43 57 58 
 36 81 51 
 307 50 65 
 43 59 44 
 36 52 37 
 64 78 79 
 57 71 72 
 64 80 65 
 58 72 73 
 51 81 66 
 307 65 80 
 58 74 59 
 51 67 52 
 59 75 60 
 52 68 53 
 61 75 76 
 53 69 54 
 61 77 62 
 55 69 70 
 62 78 63 
 55 71 56 
 76 91 92 
 68 85 69 
 76 93 77 
 70 85 86 
 77 94 78 
 70 87 71 
 78 95 79 
 72 87 88 
 80 95 96 
 73 88 89 
 66 81 82 
 307 80 96 
 73 90 74 
 66 83 67 
 74 91 75 
 67 84 68 
 95 111 96 
 89 103 104 
 82 81 97 
 307 96 111 
 89 105 90 
 83 97 98 
 90 106 91 
 83 99 84 
 92 106 107 
 84 100 85 
 92 108 93 
 86 100 101 
 94 108 109 
 86 102 87 
 95 109 110 
 88 102 103 
 99 115 100 
 107 123 108 
 101 115 116 
 109 123 124 
 101 117 102 
 109 125 110 
 103 117 118 
 110 126 111 
 104 118 119 
 97 81 112 
 307 111 126 
 104 120 105 
 98 112 113 
 105 121 106 
 98 114 99 
 107 121 122 
 119 133 134 
 112 81 127 
 307 126 141 
 119 135 120 
 112 128 113 
 120 136 121 
 113 129 114 
 122 136 137 
 114 130 115 
 122 138 123 
 116 130 131 
 124 138 139 
 116 132 117 
 124 140 125 
 118 132 133 
 125 141 126 
 137 153 138 
 131 145 146 
 139 153 154 
 131 147 132 
 139 155 140 
 133 147 148 
 141 155 156 
 134 148 149 
 127 81 142 
 307 141 156 
 134 150 135 
 127 143 128 
 135 151 136 
 129 143 144 
 137 151 152 
 129 145 130 
 142 81 157 
 307 156 171 
 149 165 150 
 142 158 143 
 150 166 151 
 144 158 159 
 152 166 167 
 144 160 145 
 152 168 153 
 146 160 161 
 154 168 169 
 146 162 147 
 154 170 155 
 148 162 163 
 155 171 156 
 149 163 164 
 161 175 176 
 168 184 169 
 161 177 162 
 170 184 185 
 163 177 178 
 171 185 186 
 164 178 179 
 157 81 172 
 307 171 186 
 164 180 165 
 157 173 158 
 165 181 166 
 158 174 159 
 167 181 182 
 159 175 160 
 167 183 168 
 179 195 180 
 173 187 188 
 180 196 181 
 174 188 189 
 182 196 197 
 174 190 175 
 182 198 183 
 176 190 191 
 184 198 199 
 176 192 177 
 184 200 185 
 178 192 193 
 185 201 186 
 179 193 194 
 172 81 187 
 307 186 201 
 199 213 214 
 191 207 192 
 199 215 200 
 193 207 208 
 200 216 201 
 194 208 209 
 187 81 202 
 307 201 216 
 194 210 195 
 187 203 188 
 195 211 196 
 188 204 189 
 197 211 212 
 189 205 190 
 197 213 198 
 191 205 206 
 210 226 211 
 203 219 204 
 212 226 227 
 204 220 205 
 212 228 213 
 206 220 221 
 214 228 229 
 206 222 207 
 214 230 215 
 208 222 223 
 215 231 216 
 209 223 224 
 202 81 217 
 307 216 231 
 209 225 210 
 202 218 203 
 229 245 230 
 223 237 238 
 231 245 246 
 224 238 239 
 217 81 232 
 307 231 246 
 224 240 225 
 217 233 218 
 225 241 226 
 219 233 234 
 227 241 242 
 219 235 220 
 227 243 228 
 221 235 236 
 229 243 244 
 221 237 222 
 233 249 234 
 242 256 257 
 234 250 235 
 242 258 243 
 236 250 251 
 244 258 259 
 236 252 237 
 244 260 245 
 238 252 253 
 245 261 246 
 239 253 254 
 232 81 247 
 307 246 261 
 239 255 240 
 232 248 233 
 240 256 241 
 253 267 268 
 260 276 261 
 254 268 269 
 247 81 262 
 307 261 276 
 254 270 255 
 248 262 263 
 255 271 256 
 248 264 249 
 257 271 272 
 249 265 250 
 257 273 258 
 251 265 266 
 259 273 274 
 251 267 252 
 259 275 260 
 272 286 287 
 264 280 265 
 272 288 273 
 266 280 281 
 274 288 289 
 266 282 267 
 274 290 275 
 268 282 283 
 276 290 291 
 269 283 284 
 262 81 277 
 307 276 291 
 269 285 270 
 263 277 278 
 270 286 271 
 263 279 264 
 291 305 306 
 284 298 299 
 277 81 292 
 307 291 306 
 284 300 285 
 277 293 278 
 285 301 286 
 278 294 279 
 287 301 302 
 279 295 280 
 287 303 288 
 281 295 296 
 289 303 304 
 281 297 282 
 289 305 290 
 283 297 298 
 294 311 295 
 302 319 303 
 296 311 312 
 304 319 320 
 296 313 297 
 304 321 305 
 298 313 314 
 305 322 306 
 299 314 315 
 292 81 308 
 307 306 322 
 299 316 300 
 292 309 293 
 300 317 301 
 293 310 294 
 302 317 318 
 315 329 330 
 308 81 323 
 307 322 337 
 315 331 316 
 308 324 309 
 316 332 317 
 309 325 310 
 318 332 333 
 310 326 311 
 318 334 319 
 311 327 312 
 320 334 335 
 312 328 313 
 320 336 321 
 314 328 329 
 321 337 322 
 333 349 334 
 327 341 342 
 335 349 350 
 327 343 328 
 335 351 336 
 329 343 344 
 336 352 337 
 330 344 345 
 323 81 338 
 307 337 352 
 330 346 331 
 323 339 324 
 331 347 332 
 324 340 325 
 333 347 348 
 325 341 326 
 307 352 367 
 345 361 346 
 338 354 339 
 346 362 347 
 340 354 355 
 348 362 363 
 340 356 341 
 348 364 349 
 342 356 357 
 350 364 365 
 342 358 343 
 350 366 351 
 344 358 359 
 351 367 352 
 345 359 360 
 338 81 353 
 365 379 380 
 357 373 358 
 365 381 366 
 359 373 374 
 366 382 367 
 360 374 375 
 353 81 368 
 307 367 382 
 360 376 361 
 353 369 354 
 361 377 362 
 355 369 370 
 363 377 378 
 355 371 356 
 363 379 364 
 357 371 372 
 368 384 369 
 376 392 377 
 370 384 385 
 378 392 393 
 370 386 371 
 378 394 379 
 372 386 387 
 380 394 395 
 372 388 373 
 380 396 381 
 374 388 389 
 381 397 382 
 375 389 390 
 368 81 383 
 307 382 397 
 375 391 376 
 387 403 388 
 396 410 411 
 389 403 404 
 396 412 397 
 390 404 405 
 383 81 398 
 307 397 412 
 390 406 391 
 384 398 399 
 391 407 392 
 384 400 385 
 393 407 408 
 385 401 386 
 393 409 394 
 387 401 402 
 395 409 410 
 406 422 407 
 400 414 415 
 408 422 423 
 400 416 401 
 408 424 409 
 402 416 417 
 410 424 425 
 402 418 403 
 410 426 411 
 404 418 419 
 411 427 412 
 405 419 420 
 398 81 413 
 307 412 427 
 405 421 406 
 398 414 399 
 425 441 426 
 419 433 434 
 426 442 427 
 420 434 435 
 413 81 428 
 307 427 442 
 420 436 421 
 413 429 414 
 421 437 422 
 415 429 430 
 423 437 438 
 415 431 416 
 423 439 424 
 417 431 432 
 425 439 440 
 417 433 418 
 429 445 430 
 438 452 453 
 430 446 431 
 438 454 439 
 432 446 447 
 440 454 455 
 432 448 433 
 440 456 441 
 434 448 449 
 441 457 442 
 435 449 450 
 428 81 443 
 307 442 457 
 435 451 436 
 429 443 444 
 436 452 437 
 449 463 464 
 457 471 472 
 450 464 465 
 443 81 458 
 307 457 472 
 450 466 451 
 443 459 444 
 451 467 452 
 445 459 460 
 453 467 468 
 445 461 446 
 453 469 454 
 447 461 462 
 455 469 470 
 447 463 448 
 455 471 456 
 467 5 468 
 461 0 475 
 468 478 469 
 462 475 1 
 470 478 479 
 463 1 476 
 470 480 471 
 464 476 2 
 471 481 472 
 465 2 3 
 458 81 473 
 307 472 481 
 465 4 466 
 459 473 474 
 466 477 467 
 460 474 0 
 477 15 16 
 475 0 8 
 5 16 17 
 1 475 9 
 478 17 18 
 476 1 10 
 479 18 19 
 2 476 11 
 480 19 20 
 2 12 13 
 3 13 14 
 474 473 6 
 4 14 15 
 0 474 7 
 6 21 22 
 14 29 30 
 7 22 23 
 15 30 31 
 8 23 24 
 16 31 32 
 9 24 25 
 18 17 32 
 10 25 26 
 19 18 33 
 12 11 26 
 19 34 35 
 12 27 28 
 13 28 29 
 25 40 41 
 33 48 49 
 26 41 42 
 34 49 50 
 27 42 43 
 29 28 43 
 21 36 37 
 29 44 45 
 22 37 38 
 31 30 45 
 23 38 39 
 32 31 46 
 24 39 40 
 33 32 47 
 44 59 60 
 37 52 53 
 46 45 60 
 38 53 54 
 46 61 62 
 39 54 55 
 47 62 63 
 40 55 56 
 48 63 64 
 42 41 56 
 49 64 65 
 43 42 57 
 43 58 59 
 36 51 52 
 64 63 78 
 57 56 71 
 64 79 80 
 58 57 72 
 58 73 74 
 51 66 67 
 59 74 75 
 52 67 68 
 61 60 75 
 53 68 69 
 61 76 77 
 55 54 69 
 62 77 78 
 55 70 71 
 76 75 91 
 68 84 85 
 76 92 93 
 70 69 85 
 77 93 94 
 70 86 87 
 78 94 95 
 72 71 87 
 80 79 95 
 73 72 88 
 73 89 90 
 66 82 83 
 74 90 91 
 67 83 84 
 95 110 111 
 89 88 103 
 89 104 105 
 83 82 97 
 90 105 106 
 83 98 99 
 92 91 106 
 84 99 100 
 92 107 108 
 86 85 100 
 94 93 108 
 86 101 102 
 95 94 109 
 88 87 102 
 99 114 115 
 107 122 123 
 101 100 115 
 109 108 123 
 101 116 117 
 109 124 125 
 103 102 117 
 110 125 126 
 104 103 118 
 104 119 120 
 98 97 112 
 105 120 121 
 98 113 114 
 107 106 121 
 119 118 133 
 119 134 135 
 112 127 128 
 120 135 136 
 113 128 129 
 122 121 136 
 114 129 130 
 122 137 138 
 116 115 130 
 124 123 138 
 116 131 132 
 124 139 140 
 118 117 132 
 125 140 141 
 137 152 153 
 131 130 145 
 139 138 153 
 131 146 147 
 139 154 155 
 133 132 147 
 141 140 155 
 134 133 148 
 134 149 150 
 127 142 143 
 135 150 151 
 129 128 143 
 137 136 151 
 129 144 145 
 149 164 165 
 142 157 158 
 150 165 166 
 144 143 158 
 152 151 166 
 144 159 160 
 152 167 168 
 146 145 160 
 154 153 168 
 146 161 162 
 154 169 170 
 148 147 162 
 155 170 171 
 149 148 163 
 161 160 175 
 168 183 184 
 161 176 177 
 170 169 184 
 163 162 177 
 171 170 185 
 164 163 178 
 164 179 180 
 157 172 173 
 165 180 181 
 158 173 174 
 167 166 181 
 159 174 175 
 167 182 183 
 179 194 195 
 173 172 187 
 180 195 196 
 174 173 188 
 182 181 196 
 174 189 190 
 182 197 198 
 176 175 190 
 184 183 198 
 176 191 192 
 184 199 200 
 178 177 192 
 185 200 201 
 179 178 193 
 199 198 213 
 191 206 207 
 199 214 215 
 193 192 207 
 200 215 216 
 194 193 208 
 194 209 210 
 187 202 203 
 195 210 211 
 188 203 204 
 197 196 211 
 189 204 205 
 197 212 213 
 191 190 205 
 210 225 226 
 203 218 219 
 212 211 226 
 204 219 220 
 212 227 228 
 206 205 220 
 214 213 228 
 206 221 222 
 214 229 230 
 208 207 222 
 215 230 231 
 209 208 223 
 209 224 225 
 202 217 218 
 229 244 245 
 223 222 237 
 231 230 245 
 224 223 238 
 224 239 240 
 217 232 233 
 225 240 241 
 219 218 233 
 227 226 241 
 219 234 235 
 227 242 243 
 221 220 235 
 229 228 243 
 221 236 237 
 233 248 249 
 242 241 256 
 234 249 250 
 242 257 258 
 236 235 250 
 244 243 258 
 236 251 252 
 244 259 260 
 238 237 252 
 245 260 261 
 239 238 253 
 239 254 255 
 232 247 248 
 240 255 256 
 253 252 267 
 260 275 276 
 254 253 268 
 254 269 270 
 248 247 262 
 255 270 271 
 248 263 264 
 257 256 271 
 249 264 265 
 257 272 273 
 251 250 265 
 259 258 273 
 251 266 267 
 259 274 275 
 272 271 286 
 264 279 280 
 272 287 288 
 266 265 280 
 274 273 288 
 266 281 282 
 274 289 290 
 268 267 282 
 276 275 290 
 269 268 283 
 269 284 285 
 263 262 277 
 270 285 286 
 263 278 279 
 291 290 305 
 284 283 298 
 284 299 300 
 277 292 293 
 285 300 301 
 278 293 294 
 287 286 301 
 279 294 295 
 287 302 303 
 281 280 295 
 289 288 303 
 281 296 297 
 289 304 305 
 283 282 297 
 294 310 311 
 302 318 319 
 296 295 311 
 304 303 319 
 296 312 313 
 304 320 321 
 298 297 313 
 305 321 322 
 299 298 314 
 299 315 316 
 292 308 309 
 300 316 317 
 293 309 310 
 302 301 317 
 315 314 329 
 315 330 331 
 308 323 324 
 316 331 332 
 309 324 325 
 318 317 332 
 310 325 326 
 318 333 334 
 311 326 327 
 320 319 334 
 312 327 328 
 320 335 336 
 314 313 328 
 321 336 337 
 333 348 349 
 327 326 341 
 335 334 349 
 327 342 343 
 335 350 351 
 329 328 343 
 336 351 352 
 330 329 344 
 330 345 346 
 323 338 339 
 331 346 347 
 324 339 340 
 333 332 347 
 325 340 341 
 345 360 361 
 338 353 354 
 346 361 362 
 340 339 354 
 348 347 362 
 340 355 356 
 348 363 364 
 342 341 356 
 350 349 364 
 342 357 358 
 350 365 366 
 344 343 358 
 351 366 367 
 345 344 359 
 365 364 379 
 357 372 373 
 365 380 381 
 359 358 373 
 366 381 382 
 360 359 374 
 360 375 376 
 353 368 369 
 361 376 377 
 355 354 369 
 363 362 377 
 355 370 371 
 363 378 379 
 357 356 371 
 368 383 384 
 376 391 392 
 370 369 384 
 378 377 392 
 370 385 386 
 378 393 394 
 372 371 386 
 380 379 394 
 372 387 388 
 380 395 396 
 374 373 388 
 381 396 397 
 375 374 389 
 375 390 391 
 387 402 403 
 396 395 410 
 389 388 403 
 396 411 412 
 390 389 404 
 390 405 406 
 384 383 398 
 391 406 407 
 384 399 400 
 393 392 407 
 385 400 401 
 393 408 409 
 387 386 401 
 395 394 409 
 406 421 422 
 400 399 414 
 408 407 422 
 400 415 416 
 408 423 424 
 402 401 416 
 410 409 424 
 402 417 418 
 410 425 426 
 404 403 418 
 411 426 427 
 405 404 419 
 405 420 421 
 398 413 414 
 425 440 441 
 419 418 433 
 426 441 442 
 420 419 434 
 420 435 436 
 413 428 429 
 421 436 437 
 415 414 429 
 423 422 437 
 415 430 431 
 423 438 439 
 417 416 431 
 425 424 439 
 417 432 433 
 429 444 445 
 438 437 452 
 430 445 446 
 438 453 454 
 432 431 446 
 440 439 454 
 432 447 448 
 440 455 456 
 434 433 448 
 441 456 457 
 435 434 449 
 435 450 451 
 429 428 443 
 436 451 452 
 449 448 463 
 457 456 471 
 450 449 464 
 450 465 466 
 443 458 459 
 451 466 467 
 445 444 459 
 453 452 467 
 445 460 461 
 453 468 469 
 447 446 461 
 455 454 469 
 447 462 463 
 455 470 471 
 467 477 5 
 461 460 0 
 468 5 478 
 462 461 475 
 470 469 478 
 463 462 1 
 470 479 480 
 464 463 476 
 471 480 481 
 465 464 2 
 465 3 4 
 459 458 473 
 466 4 477 
 460 459 474
  `;
  
  // Testeingabe
  const Testinput = `
  1 1 -1
  1 -1 -1
  1 1 1
  1 -1 1
  -1 1 -1
  -1 -1 -1
  -1 1 1
  -1 -1 1
  3 4 2 0
  3 2 7 3
  3 6 5 7
  3 1 7 5
  3 0 3 1
  3 4 1 5
  3 4 6 2
  3 2 6 7
  3 6 4 5
  3 1 3 7
  3 0 2 3
  3 4 0 1
  `;
  
  // Verwendung
  const result = formatString(input);
  console.log(result);
  